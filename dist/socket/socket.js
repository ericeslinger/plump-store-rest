"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var ulid = require("ulid");
function rpc(io, channel, request) {
    return new Promise(function (resolve, reject) {
        request.responseKey = ulid();
        io.once(request.responseKey, function (response) {
            resolve(response);
        });
        io.emit(channel, request);
    });
}
exports.rpc = rpc;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zb2NrZXQvc29ja2V0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBTUEsMkJBQTZCO0FBRTdCLGFBQ0UsRUFBeUIsRUFDekIsT0FBZSxFQUNmLE9BQXVDO0lBRXZDLE1BQU0sQ0FBQyxJQUFJLE9BQU8sQ0FBSSxVQUFDLE9BQU8sRUFBRSxNQUFNO1FBQ3BDLE9BQU8sQ0FBQyxXQUFXLEdBQUcsSUFBSSxFQUFFLENBQUM7UUFDN0IsRUFBRSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxFQUFFLFVBQUEsUUFBUTtZQUNuQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDcEIsQ0FBQyxDQUFDLENBQUM7UUFDSCxFQUFFLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQztJQUM1QixDQUFDLENBQUMsQ0FBQztBQUNMLENBQUM7QUFaRCxrQkFZQyIsImZpbGUiOiJzb2NrZXQvc29ja2V0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgU29ja2V0SU9DbGllbnQgZnJvbSAnc29ja2V0LmlvLWNsaWVudCc7XG5pbXBvcnQge1xuICBBdXRoZW50aWNhdGlvblJlcXVlc3QsXG4gIFNpbmdsZXRvblJlcXVlc3QsXG4gIFJlc3BvbnNlLFxufSBmcm9tICcuL21lc3NhZ2VJbnRlcmZhY2VzJztcbmltcG9ydCAqIGFzIHVsaWQgZnJvbSAndWxpZCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBycGM8VCBleHRlbmRzIFJlc3BvbnNlPihcbiAgaW86IFNvY2tldElPQ2xpZW50LlNvY2tldCxcbiAgY2hhbm5lbDogc3RyaW5nLFxuICByZXF1ZXN0OiBQYXJ0aWFsPEF1dGhlbnRpY2F0aW9uUmVxdWVzdD4sXG4pOiBQcm9taXNlPFQ+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlPFQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICByZXF1ZXN0LnJlc3BvbnNlS2V5ID0gdWxpZCgpO1xuICAgIGlvLm9uY2UocmVxdWVzdC5yZXNwb25zZUtleSwgcmVzcG9uc2UgPT4ge1xuICAgICAgcmVzb2x2ZShyZXNwb25zZSk7XG4gICAgfSk7XG4gICAgaW8uZW1pdChjaGFubmVsLCByZXF1ZXN0KTtcbiAgfSk7XG59XG4iXX0=
